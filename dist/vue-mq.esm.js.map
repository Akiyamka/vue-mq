{"version":3,"file":"vue-mq.esm.js","sources":["../src/helpers.js","../src/index.js"],"sourcesContent":["import json2mq from 'json2mq'\n\nexport function convertBreakpointsToMediaQueries(breakpoints) {\n  const keys = Object.keys(breakpoints)\n  const breakpointValues = [0, ...Object.values(breakpoints).slice(0, -1)]\n  const mediaQueries = breakpointValues.reduce((sum, value, index) => {\n    const options = Object.assign(\n      {\n        minWidth: value,\n      },\n      index < keys.length - 1 ? { maxWidth: breakpointValues[index+1] - 1 } : {},\n    )\n    const mediaQuery = json2mq(options)\n    return Object.assign(\n      sum,\n      {\n        [keys[index]]: mediaQuery,\n      }\n    )\n  }, {})\n  return mediaQueries\n}\n\nexport function transformValuesFromBreakpoints(breakpoints, values, currentBreakpoint) {\n  const findClosestValue = (currentBreakpoint) => {\n    const index = breakpoints.findIndex(b => b === currentBreakpoint)\n    const newBreakpoint = index !== -1 || index !== 0 ? breakpoints[index-1] : null\n    if (!newBreakpoint) return values[index]\n    return values[newBreakpoint] || findClosestValue(newBreakpoint)\n  }\n  const result = values[currentBreakpoint] || findClosestValue(currentBreakpoint)\n  return result\n}\n","import { convertBreakpointsToMediaQueries, transformValuesFromBreakpoints } from './helpers.js'\n\nconst DEFAULT_BREAKPOINT = {\n  sm: 450,\n  md: 1250,\n  lg: Infinity,\n}\n\nconst install = function (Vue, { breakpoints = DEFAULT_BREAKPOINT } = {}) {\n  // Init reactive component\n  const reactorComponent = new Vue({\n    data: () => ({\n      currentBreakpoint: null,\n    })\n  })\n\n  const mediaQueries = convertBreakpointsToMediaQueries(breakpoints)\n  Object.keys(mediaQueries).map((key) => {\n    const mediaQuery = mediaQueries[key]\n    const enter = () => { reactorComponent.currentBreakpoint = key }\n    _subscribeToMediaQuery(mediaQuery, enter)\n  })\n\n  function _subscribeToMediaQuery(mediaQuery, enter) {\n    const mql = window.matchMedia(mediaQuery)\n    const cb = ({ matches }) => {\n      if (matches) enter()\n    }\n    mql.addListener(cb) //subscribing\n    cb(mql) //initial trigger\n  }\n\n  Vue.filter('mq', (currentBreakpoint, values) => {\n    return transformValuesFromBreakpoints(Object.keys(breakpoints), values, currentBreakpoint)\n  })\n  Vue.mixin({\n    computed: {\n      $mq() {\n        return reactorComponent.currentBreakpoint\n      },\n    }\n  })\n}\n\nexport default { install }\n"],"names":["convertBreakpointsToMediaQueries","Object","keys","values","slice","reduce","assign","minWidth","length","maxWidth","json2mq","transformValuesFromBreakpoints","findIndex","DEFAULT_BREAKPOINT","sm","md","lg","Infinity","install","breakpoints","window","matchMedia","matches","addListener","data","currentBreakpoint","map","filter","mixin","computed","$mq"],"mappings":"sIAEO,QAASA,iCAAT,GAAuD,CAC5D,KAAM,GAAOC,OAAOC,IAAP,GAAb,CACM,EAAmB,CAAC,CAAD,CAAI,GAAGD,OAAOE,MAAP,IAA2BC,KAA3B,CAAiC,CAAjC,CAAoC,CAAC,CAArC,CAAP,CADzB,CAEM,EAAe,EAAiBC,MAAjB,CAAwB,SAAuB,CAClE,KAAM,GAAUJ,OAAOK,MAAP,CACd,CACEC,UADF,CADc,CAId,EAAQ,EAAKC,MAAL,CAAc,CAAtB,CAA0B,CAAEC,SAAU,EAAiB,EAAM,CAAvB,EAA4B,CAAxC,CAA1B,GAJc,CAAhB,CAMM,EAAaC,UANnB,CAOA,MAAOT,QAAOK,MAAP,GAEL,CACE,CAAC,IAAD,GADF,CAFK,CAMR,CAdoB,IAFrB,CAiBA,QACD,CAED,QAAgBK,+BAAhB,OAAuF,CACrF,KAAM,GAAmB,KAAuB,CAC9C,KAAM,GAAQ,EAAYC,SAAZ,CAAsB,KAAK,KAA3B,CAAd,CACM,EAA0B,CAAC,CAAX,MAA0B,CAAV,IAAhB,CAA8B,EAAY,EAAM,CAAlB,CAA9B,CAAqD,IAD3E,CAD8C,SAIvC,MAAyB,IAJc,CAGnB,KAH7B,CAMM,EAAS,MAA6B,IAN5C,CAOA,QACD,CC9BD,KAAMC,oBAAqB,CACzBC,GAAI,GADqB,CAEzBC,GAAI,IAFqB,CAGzBC,GAAIC,QAHqB,CAA3B,CAMMC,QAAU,WAAe,CAAEC,cAAcN,kBAAhB,IAAf,CAA0D,CAexE,eAAmD,CACjD,KAAM,GAAMO,OAAOC,UAAP,GAAZ,CACM,EAAK,CAAC,CAAEC,SAAF,CAAD,GAAiB,IACb,IAFf,CAIA,EAAIC,WAAJ,GALiD,CAMjD,IACD,CApBD,KAAM,GAAmB,MAAQ,CAC/BC,KAAM,KAAO,CACXC,kBAAmB,IADR,CAAP,CADyB,CAAR,CAAzB,CAMM,EAAezB,mCANrB,CAOAC,OAAOC,IAAP,IAA0BwB,GAA1B,CAA8B,KAAS,CACrC,KAAM,GAAa,IAAnB,CAEA,IADc,IAAM,CAAE,EAAiBD,iBAAjB,GACtB,CACD,CAJD,CATwE,CAwBxE,EAAIE,MAAJ,CAAW,IAAX,CAAiB,OACRhB,+BAA+BV,OAAOC,IAAP,GAA/B,KADT,CAxBwE,CA2BxE,EAAI0B,KAAJ,CAAU,CACRC,SAAU,CACRC,KAAM,CACJ,MAAO,GAAiBL,iBACzB,CAHO,CADF,CAAV,EAjCF,CA0CA,UAAe,CAAEP,OAAF,CAAf"}